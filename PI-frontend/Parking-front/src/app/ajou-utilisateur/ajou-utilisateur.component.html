<div class="inscription-container">
    <div class="inscription-card">
        <div class="logo-container">
            <img src="imagelogoParking.png" alt="Logo" class="logo">
        </div>

        <h1>Ajouter un utilisateur</h1>

        <form [formGroup]="inscriptionForm" (ngSubmit)="onSubmit()">
            <div class="form-row">
                <div class="form-group">
                    <label for="nom">Nom<span class="required">*</span></label>
                    <input type="text" id="nom" formControlName="nom" placeholder="Entrer votre nom" [ngClass]="{'is-invalid': isFieldInvalid('nom')}">
                    <div *ngIf="isFieldInvalid('nom') && inscriptionForm.get('nom')?.value" class="error-message">Le nom est obligatoire</div>
                </div>

                <div class="form-group">
                    <label for="prenom">Prenom<span class="required">*</span></label>
                    <input type="text" id="prenom" formControlName="prenom" placeholder="Entrer votre prenom" [ngClass]="{'is-invalid': isFieldInvalid('prenom')}">
                    <div *ngIf="isFieldInvalid('prenom') && inscriptionForm.get('prenom')?.value" class="error-message">Le prénom est obligatoire</div>
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="email">Email<span class="required">*</span></label>
                    <input type="email" id="email" formControlName="email" placeholder="Entrer votre email" [ngClass]="{'is-invalid': isFieldInvalid('email')}">
                    <div *ngIf="isFieldInvalid('email') && inscriptionForm.get('email')?.value" class="error-message">Veuillez entrer un email valide</div>
                </div>

                <div class="form-group">
                    <label for="telephone">Telephone<span class="required">*</span></label>
                    <input type="tel" id="telephone" formControlName="telephone" placeholder="Entrer votre numero de telephone" [ngClass]="{'is-invalid': isFieldInvalid('telephone')}">
                    <div *ngIf="isFieldInvalid('telephone') && inscriptionForm.get('telephone')?.value" class="error-message">Veuillez entrer un numéro valide (9 chiffres)</div>
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="mot_de_passe">Mot de passe<span class="required">*</span></label>
                    <input type="password" id="mot_de_passe" formControlName="mot_de_passe" placeholder="Entrer votre mot de passe" [ngClass]="{'is-invalid': isFieldInvalid('mot_de_passe')}">
                    <div *ngIf="isFieldInvalid('mot_de_passe') && inscriptionForm.get('mot_de_passe')?.value" class="error-message">Le mot de passe doit contenir au moins 8 caractères</div>
                </div>

                <div class="form-group">
                    <label for="adresse">Adresse de residence<span class="required">*</span></label>
                    <input type="text" id="adresse" formControlName="adresse" placeholder="Entrer votre adresse" [ngClass]="{'is-invalid': isFieldInvalid('adresse')}">
                    <div *ngIf="isFieldInvalid('adresse') && inscriptionForm.get('adresse')?.value" class="error-message">L'adresse est obligatoire</div>
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="role">Rôle<span class="required">*</span></label>
                    <select id="role" formControlName="role" [ngClass]="{'is-invalid': isFieldInvalid('role')}">
                        <option value="" disabled selected>Sélectionner un rôle</option>
                        <option value="utilisateur">utilisateur</option>
                        <option value="administrateur">administrateur</option>
                    </select>
                    <div *ngIf="isFieldInvalid('role') && inscriptionForm.get('role')?.value" class="error-message">Le rôle est obligatoire</div>
                </div>

                <div class="form-group">
                    <label for="carteRfid">Carte RFID<span class="required">*</span></label>
                    <input type="text" id="carteRfid" formControlName="carteRfid" placeholder="Scanner pour assigner la carte RFID" [ngClass]="{'is-invalid': isFieldInvalid('carteRfid')}">
                    <div *ngIf="isFieldInvalid('carteRfid') && inscriptionForm.get('carteRfid')?.value" class="error-message">La carte RFID est obligatoire</div>
                </div>
            </div>

            <div *ngIf="error" class="alert-error">
                {{ error }}
            </div>
            <div *ngIf="success" class="alert-success">
                Inscription réussie!
            </div>

            <div class="button-container">
                <button type="submit" [disabled]="loading || !isFormValid()">
                    <span *ngIf="loading" class="spinner"></span>
                    S'inscrire
                </button>
            </div>
            <a href="/" class="back-to-home">
                <img src="retour.png" alt="Retour à l'accueil" class="home-icon">
            </a>
        </form>
    </div>

</div>