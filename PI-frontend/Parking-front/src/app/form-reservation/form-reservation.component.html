<div class="modal-overlay" *ngIf="isVisible">
    <div class="reservation-container">
        <div class="reservation-header">
            <h2>Réserver une place de parking</h2>
        </div>
        <form [formGroup]="reservationForm" (ngSubmit)="onSubmit()">
            <div class="parking-info-card">
                <div class="parking-info">
                    <h3>{{ parkingName || 'Nom du Parking' }}</h3>
                    <div class="address">{{ parkingAddress || 'Adresse du Parking' }}</div>
                    <!-- <div class="price">Tarif: {{ reservationForm.value.price || '0 FCFA' }}/heure</div> -->
                </div>
            </div>
            <div class="form-section">
                <h3>Informations du véhicule</h3>
                <div class="form-row">
                    <div class="form-group">
                        <label for="vehicleType">Type de véhicule</label>
                        <select id="vehicleType" formControlName="vehicleType">
                            <option value="voiture">Voiture</option>
                            <option value="moto">Moto</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="plateNumber">Numéro d'immatriculation</label>
                        <input type="text" id="plateNumber" formControlName="plateNumber" placeholder="AA-674-AZ">
                    </div>
                </div>
            </div>
            <div class="form-section">
                <h3>Informations de réservation</h3>
                <div class="form-row">
                    <div class="form-group">
                        <label for="nomPlace">Nom de la place</label>
                        <input type="text" id="nomPlace" formControlName="nomPlace" placeholder="Nom de la place" readonly>
                    </div>
                    <div class="form-group">
                        <label for="arrivalDateTime">Date et heure d'arrivée</label>
                        <input type="datetime-local" id="arrivalDateTime" formControlName="arrivalDateTime" required>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="departureDateTime">Date et heure de départ</label>
                        <input type="datetime-local" id="departureDateTime" formControlName="departureDateTime" required>
                    </div>
                    <div class="form-group">
                        <label for="price">Prix/heure</label>
                        <input type="text" id="price" formControlName="price" placeholder="0 FCFA" readonly>
                    </div>
                </div>
            </div>
            <div class="form-section">
                <h3>Payer ici</h3>
                <div class="form-row payment-options">
                    <div class="form-group payment-option" [ngClass]="{'payment-initiated': isPaymentInitiated}">
                        <label class="custom-radio">
                            <input type="radio" formControlName="paymentMethod" value="online" checked>
                            Paiement en ligne uniquement
                        </label>
                    </div>
                    <button type="button" (click)="processPayment()" [disabled]="!reservationForm.valid">Payer maintenant</button>
                </div>
            </div>

            <div class="alert-warning">
                <span class="material-icons">warning</span> Une amende sera appliquée en cas de dépassement du temps réservé.
            </div>

            <div class="form-actions">
                <button type="button" (click)="closeModal()">Annuler</button>
                <button type="submit" [disabled]="!isPaymentProcessed">Confirmer la réservation</button>
            </div>
        </form>
    </div>


</div>